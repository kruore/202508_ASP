

---

# [ROOT] 4인 멀티플레이 액션 RPG

├── 1. Network Core (통신 심장부)
│   ├── NetworkManager (연결, 접속 끊김, 재접속 처리)
│   ├── Matchmaking (로비, 방 생성, 4인 매칭)
│   ├── Replication System (복제: 서버 상태를 클라이언트에 동기화)
│   │   ├── Transform Sync (위치/회전: 보간법 사용)
│   │   └── Variable Sync (HP, MP, 버프 상태 동기화)
│   └── RPC Handler (원격 프로시저 호출: "스킬 써줘" -> "알았다")
│
├── 2. Player Controller (플레이어: 내 것 vs 남의 것)
│   ├── LocalPlayerController (내가 조종)
│   │   ├── Input Processing (키 입력)
│   │   └── Client-Side Prediction (서버 응답 전 미리 움직여서 반응성 확보)
│   │
│   └── RemotePlayerController (다른 사람 3명)
│       ├── State Interpolation (뚝뚝 끊기지 않게 움직임 부드럽게 보정)
│       └── Simulation (단순 애니메이션 재생)
│
├── 3. Action & Combat (서버 권한 - Server Authoritative)
│   ├── Attack Request (클라이언트: "나 공격 버튼 눌렀어")
│   ├── Hit Validation (서버: "거거리상 맞는게 확실한가?" 판정)
│   │   ├── Lag Compensation (과거의 위치를 되감아서 판정)
│   │   └── Hitbox Check (실제 충돌 계산)
│   └── Damage Broadcast (서버: "A가 B를 때렸음. HP 깎아" -> 전원에게 전송)
│
├── 4. Dungeon & World State (공유된 환경)
│   ├── Dungeon Manager (서버만 관리)
│   │   ├── Monster Spawner (몬스터 생성 및 AI 연산)
│   │   └── Room State (문 열림/닫힘, 보스전 시작 트리거)
│   │
│   └── Interactables (아이템/오브젝트)
│       └── Ownership (누가 먼저 먹었는가? 동시 습득 방지)
│
└── 5. UI/UX (멀티플레이 특화)
    ├── Party Widget (팀원 연결 상태, HP/MP 실시간 반영)
    ├── Chat / Ping System (텍스트 채팅 및 "이리로 와" 핑 찍기)
    └── Damage Floater (서버에서 확정된 데미지 숫자 띄우기)